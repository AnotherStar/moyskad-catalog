# moyskad-catalog

Генератор ICML для каталога из МойСклад

## Использование

1) Выполните include файла `MoySkladICMLParser.php`

2) Сконфигурируйте парсер

```php
$parser = new MoySkladICMLParser(
    'login@moysklad',
    'password',
    'shopname',
    $options
);
```

3) Вызовите метод `generateICML`

```php
$parser->generateICML();
```

Смотрите файл `example.php` в качестве простого примера использования парсера.

## Дополнительные опции

Параметр $options - массив со следующими ключами:

* `file` - Имя файла с итоговым icml без пути (по умолчанию: shopname.catalog.xml)
* `directory` - Директория для итогового icml файла (по умолчанию: текущая директория)
* `ignoreOffers` - Если `true` модификации товаров из МойСклад будут проигнорированы
* `ignoreCategories` - Строка `'all'` или массив с ключами:
  * `uuids` - Массив c `uuid` групп товаров, которые должны быть проигнорированы
  * `externalCodes` - Массив c `внешними кодами` групп товаров, которые должны быть проигнорированы
* `ignoreProducts` - Массив с ключами:
  * `uuids` - Массив с `uuid` товаров, которые будут проигнорированы (Модификации товара проигнорировать нельзя)
  * `externalCodes` - Массив с `внешними кодами` товаров, которые будут проигнорированы (Модификации товара проигнорировать нельзя)
* `imgur` - Хостинг изображений
  * `clientId` - Уникальный идентификатор приложения (как его получить читайте далее)

Все доступные опции не обязательны для использования

## Добавление изображения

Для того чтобы добавить в выгрузку изображение товара

Создать приложение на сайте https://api.imgur.com/oauth2/addclient
* Application name - Название сайта
* Authorization type - OAuth 2 authorization without a callback URL
* Application website - URL сайта
* Email - email администаротора сайта
* Description - Описание сайта
После создания приложения отобразится два поля `Client ID` и `Client secret`. Нам потребуется только `Client ID` который требуется вставить в $options.